# Homework-bot
Чат-бот Telegram для получения информации о проведенном код-ревью домашнего задания (Telegram API)

Проект размещен на Heroku.
___________________________________________________
Программа написана на Python с использованием:
- requests (направление http-запроса на сервер прогноза погоды),
- python-dotenv (загрузка и считывание переменных окружения из файла .env)
- python-telegram-bot (работа с Телеграм-ботом)
- pySocks (направление трафика через SOCKS и HTTP прокси-серверы)

## Как работает программа:
Чат-бот Телеграм обращается к API, которое возвращает изменение статуса домашнего задания и сообщает проверено ли задание, провалено или принято.

## Как запустить программу:

1) Клонируйте репозитроий с программой:
```
git clone https://github.com/leks20/telegram-api-bot
```
2) В созданной директории установите виртуальное окружение, активируйте его и установите необхоимые зависимости:
```
python3 -m venv venv

. venv/bin/activate

pip install -r requirements.txt
```
3) Создайте чат-бота Телеграм
4) Создайте в директории файл .env и поместите туда необходимые токены в формате PRAKTIKUM_TOKEN = 'ххххххххх', TELEGRAM_TOKEN = 'ххххххххххх',
TELEGRAM_CHAT_ID = 'ххххххххххх'
5) Откройте файл homework.py и запустите код




### Пример ответа чат-бота:
{
   "homeworks":[
      {
         "id":123,
         "status":"approved",
         "homework_name":"username__hw_python_oop.zip",
         "reviewer_comment":"Всё нравится",
         "date_updated":"2020-02-13T14:40:57Z",
         "lesson_name":"Итоговый проект"
      }
   ],
   "current_date":1581604970
}


### Процесс работы программы:
- Пользователь запускает чат-бота Телеграм "WhatGonnaWear-bot" кнопкой /start.
- В ответ приходит сообщение "Привет <имя пользователя в Телеграм>! Напишите название города или выберите из списка".
- В предложенном списке в виде кнопок - 10 городов России с наибольшим количеством жителей. Пользователь может написать любой другой город мира.
- Полученное наименование города передается в качетстве аргумента в функцию, которая осуществляет http-запрос на открытый API погодного сервера, который в свою очередь предоставляет информацию о погоде в городе в формате JSON (при этом функция обрабатывает возможные исключения и в случае ошибки соединения формирует соответствущий ответ пользователю).
- Из полученной информации отбираются только данные необходимые для ответа пользователю: общее описание погоды (ясно, пасмурно, облачно с прояснениями...), температура воздуха, ощущение температуры в гр. Цельсия, влажность, скорость ветра, м/с в трёх временных точках.
- Далее исходя из полученных данных о погоде формируется краткая рекомендация о выборе одежды.
- Пользователю приходит ответ от чат-бота с рекомендацией и прогнозом погоды в выбранном городе.
- В случае возникновения ошибки соединения или ввода неверного наименования города пользователю приходит соответсвующее сообщение.



